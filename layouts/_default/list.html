{{ define "main" }}
<div class="home h-feed">
  <div id="navPadding"></div>
 <h1 class="page-header">{{ .Title }}</h1>
  <ul class="post-list">
    {{ $paginator := .Paginate (where .Pages.ByDate.Reverse "Type" "post") }}
    {{ range .Paginator.Pages  }}
    <div class="post-preview h-entry {{ range .Params.categories }} {{ . | urlize | lower }}{{ end }}">
      <a href="{{ .Permalink }}" class="post-date u-url"><time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">{{ .Date.Format "Jan 2, 2006" }}</time></a>
      {{ if .Title }}
      <h1 class="post-title p-name"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
      {{ if templates.Exists "partials/summary.html" }}
      <div class="p-summary">
        {{ .Summary | safeHTML }}
        {{ if .Truncated }}
        <p><a class="read-more" href="{{ .Permalink }}">{{ .Site.Params.read_more_text | safeHTML }}</a></p>
        <ul class="post-tags">
                {{ range .Params.categories }}
                    {{ $href := print (absURL "categories/") (urlize .) }}
                    <li><a href="{{ $href }}">{{ . }}</a></li>
                {{ end }}
            </ul>
        {{ else }}
            <ul class="post-tags">
                {{ range .Params.categories }}
                    {{ $href := print (absURL "categories/") (urlize .) }}
                    <li><a href="{{ $href }}">{{ . }}</a></li>
                {{ end }}
            </ul>
        {{ end }}
      </div>
      {{ else }}
      <div class="e-content">
        {{ .Content }}
      </div>
      {{ end }}
      {{ else }}
      <div class="e-content">
        {{ .Content }}
      </div>
      {{ end }}
    </div>
    {{ end }}
  </ul>
</div>
<div class="post-nav">
  {{ if $paginator.HasPrev }}
  <span class="prev">
    <a href="{{ $paginator.Prev.URL }}" title="Previous Page"><span class="arrow">← Newer Posts</span></a>
  </span>
  {{ end }}
  {{ if $paginator.HasNext }}
  <span class="next">
    <a href="{{ $paginator.Next.URL }}"><span class="arrow">Older Posts →</span></a>
  </span>
  {{ end }}
</div>
{{ end }}
